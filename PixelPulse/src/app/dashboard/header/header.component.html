<header class="header" role="banner">
  <div class="header-content">
    <div class="brand" [routerLink]="['/dashboard']" aria-label="Go to dashboard" tabindex="0">
      <span class="brand-text">Pixel Pulse</span>
    </div>

    <div class="header-controls" role="toolbar" aria-label="Header controls">
      <button class="icon-button" (click)="toggleTheme()" [attr.aria-label]="isDarkMode ? 'Switch to light mode' : 'Switch to dark mode'">
        <svg *ngIf="!isDarkMode" width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true">
          <path d="M10 3V1M10 19V17M17 10H19M1 10H3M15.657 4.343L17.071 2.929M2.929 17.071L4.343 15.657M15.657 15.657L17.071 17.071M2.929 2.929L4.343 4.343M14 10C14 12.2091 12.2091 14 10 14C7.79086 14 6 12.2091 6 10C6 7.79086 7.79086 6 10 6C12.2091 6 14 7.79086 14 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <svg *ngIf="isDarkMode" width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true">
          <path d="M17 10.5C16.8 14.8 13.2 18.3 8.9 18.1C5.3 17.9 2.4 15 2.1 11.4C1.8 7.1 5.3 3.5 9.6 3.3C10.1 3.3 10.3 3.9 10 4.3C8.6 6.2 8.5 8.9 10 11C11.5 13.1 14.2 13.7 16.5 12.8C17 12.6 17.1 13.1 17 13.5V10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>

      <button class="icon-button" (click)="toggleSettings()" aria-label="Open settings">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true">
          <path d="M10 12.5C11.3807 12.5 12.5 11.3807 12.5 10C12.5 8.61929 11.3807 7.5 10 7.5C8.61929 7.5 7.5 8.61929 7.5 10C7.5 11.3807 8.61929 12.5 10 12.5Z" stroke="currentColor" stroke-width="1.5"/>
          <path d="M16.25 10C16.25 10.625 16.75 11.125 17.375 11.125C17.625 11.125 17.875 11.25 18 11.5L18.5 12.5C18.625 12.75 18.625 13 18.5 13.25L18 14.25C17.875 14.5 17.625 14.625 17.375 14.625C16.75 14.625 16.25 15.125 16.25 15.75C16.25 16 16.125 16.25 15.875 16.375L14.875 16.875C14.625 17 14.375 17 14.125 16.875L13.125 16.375C12.875 16.25 12.625 16.25 12.375 16.375C11.875 16.625 11.25 16.625 10.625 16.375C10.375 16.25 10.125 16.25 9.875 16.375L8.875 16.875C8.625 17 8.375 17 8.125 16.875L7.125 16.375C6.875 16.25 6.625 16.125 6.625 15.875C6.625 15.25 6.125 14.75 5.5 14.75C5.25 14.75 5 14.625 4.875 14.375L4.375 13.375C4.25 13.125 4.25 12.875 4.375 12.625L4.875 11.625C5 11.375 5.25 11.25 5.5 11.25C6.125 11.25 6.625 10.75 6.625 10.125C6.625 9.875 6.75 9.625 7 9.5L8 9C8.25 8.875 8.5 8.875 8.75 9L9.75 9.5C10 9.625 10.25 9.625 10.5 9.5C11 9.25 11.625 9.25 12.25 9.5C12.5 9.625 12.75 9.625 13 9.5L14 9C14.25 8.875 14.5 8.875 14.75 9L15.75 9.5C16 9.625 16.125 9.875 16.125 10.125L16.25 10Z" stroke="currentColor" stroke-width="1.5"/>
        </svg>
      </button>

      <div class="user-menu-container">
        <button class="user-button" (click)="toggleUserMenu()" [attr.aria-expanded]="showUserMenu" aria-controls="user-menu">
          <div class="user-avatar" aria-hidden="true">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M10 10C12.0711 10 13.75 8.32107 13.75 6.25C13.75 4.17893 12.0711 2.5 10 2.5C7.92893 2.5 6.25 4.17893 6.25 6.25C6.25 8.32107 7.92893 10 10 10Z" stroke="currentColor" stroke-width="1.5"/>
              <path d="M17.5 17.5C17.5 14.7386 14.1421 12.5 10 12.5C5.85786 12.5 2.5 14.7386 2.5 17.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
          </div>
        </button>

        <div class="dropdown-menu" *ngIf="showUserMenu" id="user-menu" role="menu" aria-label="User menu">
          <div class="dropdown-item" role="menuitem">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true">
              <path d="M8 8C9.65685 8 11 6.65685 11 5C11 3.34315 9.65685 2 8 2C6.34315 2 5 3.34315 5 5C5 6.65685 6.34315 8 8 8Z" stroke="currentColor" stroke-width="1.5"/>
              <path d="M14 14C14 11.7909 11.3137 10 8 10C4.68629 10 2 11.7909 2 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            <span>Profile</span>
          </div>
          <div class="dropdown-item" (click)="toggleSettings(); closeMenus()" role="menuitem">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true">
              <path d="M8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10Z" stroke="currentColor" stroke-width="1.5"/>
              <path d="M13 8C13 8.5 13.5 9 14 9C14.2 9 14.4 9.1 14.5 9.3L15 10.3C15.1 10.5 15.1 10.7 15 10.9L14.5 11.9C14.4 12.1 14.2 12.2 14 12.2C13.5 12.2 13 12.7 13 13.2C13 13.4 12.9 13.6 12.7 13.7L11.7 14.2C11.5 14.3 11.3 14.3 11.1 14.2L10.1 13.7C9.9 13.6 9.7 13.6 9.5 13.7C9.1 13.9 8.6 13.9 8.1 13.7C7.9 13.6 7.7 13.6 7.5 13.7L6.5 14.2C6.3 14.3 6.1 14.3 5.9 14.2L4.9 13.7C4.7 13.6 4.6 13.5 4.6 13.3C4.6 12.8 4.1 12.3 3.6 12.3C3.4 12.3 3.2 12.2 3.1 12L2.6 11C2.5 10.8 2.5 10.6 2.6 10.4L3.1 9.4C3.2 9.2 3.4 9.1 3.6 9.1C4.1 9.1 4.6 8.6 4.6 8.1C4.6 7.9 4.7 7.7 4.9 7.6L5.9 7.1C6.1 7 6.3 7 6.5 7.1L7.5 7.6C7.7 7.7 7.9 7.7 8.1 7.6C8.5 7.4 9 7.4 9.5 7.6C9.7 7.7 9.9 7.7 10.1 7.6L11.1 7.1C11.3 7 11.5 7 11.7 7.1L12.7 7.6C12.9 7.7 13 7.9 13 8.1V8Z" stroke="currentColor" stroke-width="1.5"/>
            </svg>
            <span>Settings</span>
          </div>
          <div class="dropdown-divider"></div>
          <div class="dropdown-item" (click)="logout(); closeMenus()" role="menuitem">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true">
              <path d="M6 14H3C2.44772 14 2 13.5523 2 13V3C2 2.44772 2.44772 2 3 2H6M11 11L14 8M14 8L11 5M14 8H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Logout</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <app-settings *ngIf="showSettings" (close)="toggleSettings()"></app-settings>
</header>
